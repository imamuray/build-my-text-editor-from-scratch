概要
--

「kilo」というテキストエディタを作る

参考サイト：[Build Your Own Text Editor](https://viewsourcecode.org/snaptoken/kilo/)

モチベーション
--

ファイル中の任意の位置へランダムアクセスする方法を考えたとき、身近なソフトウェアであるテキストエディタではどのようにそれを実現しているのかが気になったから。

背景
--

大学の課題で、1000万行を超えるのcsvファイルから適切なデータを取得する方法を2つ考えて実装し、その性能を比較するというものがあった。
1つはDBMSを使うもので、もう1つはDBMSを使わない独自の方法を考えるというものだった。

独自実装を考えるにあたり、DBMSの検索よりも高速にすることを目標とした。
そこで問題となったことは、ファイル中の任意の位置へランダムアクセスする方法だった。
単にファイルをオープンしただけではシーケンシャルアクセスしかできないため、検索に時間がかかってしまう。

ランダムアクセスの解決策として、C言語の標準ライブラリの`fseek()`と`ftell()`を使うことにした。
ファイルをオープンしたときに、行頭の位置を`ftell()`で取得して配列に保存し、`fseek()`でその値を使うことでファイルの行頭へランダムアクセスするようにした。

独自実装では毎回`ftell()`の処理が入るため起動に時間がかかるが、同じくファイルを扱うテキストエディタはすぐに起動し、任意の位置へカーソルを移動して編集することができる(例えばVimは`:100`とすれば100行目へカーソルを移動できる)。
このようなテキストエディタの機能がどのように実装されているかに興味を持ったので実際に作ってみようと考えた。

また、大学の課題の結果は、独自実装がDBMSより約4倍遅かった。この結果から、DBMSがどのように高速な検索を実現しているかにも興味を持ったのでこちらもできれば実装したいと考えている。